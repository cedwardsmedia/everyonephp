<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>EveryonePHP by Corey Edwards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">EveryonePHP</h1>
      <h2 class="project-tagline">Open-Source EveryoneAPI PHP Class</h2>
      <a href="https://github.com/cedwardsmedia/everyonephp" class="btn">View on GitHub</a>
      <a href="https://packagist.org/packages/cedwardsmedia/everyonephp" class="btn">Install with Composer</a>
    </section>

    <section class="main-content">
      <h1>
<a id="everyonephp-v100" class="anchor" href="#everyonephp-v100" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it?</h1>

<p><em>EveryonePHP</em> is a simple PHP class for querying the <a href="http://www.everyoneapi.com/">EveryoneAPI</a> service and returning the results. It uses <a href="http://guzzlephp.org/">Guzzle</a> to create the request and  makes the JSON response available to your application as a <a href="http://www.webmaster-source.com/2009/08/20/php-stdclass-storing-data-object-instead-array/">stdClass object</a>. This makes handling the results even easier than working with arrays!</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>I highly recommend using <em>Composer</em> to install <em>EveryonePHP</em> for your project. <em>Composer</em> will allow you to automatically install the <em>GuzzleHttp</em> library, which <em>EveryonePHP</em> depends on.</p>

<ol>
<li>Install <a href="https://getcomposer.org/download/">Composer</a>
</li>
<li>
<code>cd</code> to your project's directory</li>
<li>Run <code>composer require cedwardsmedia/everyonephp</code>
</li>
<li>Build your amazing project!</li>
</ol>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>I have never been a great programmer. As such, I strived to make EveryonePHP as simple to use as possible and I'm always looking to simplify it even more. The best way to explain how it works is to simply try it out. Let's build a basic EveryoneAPI client in five easy steps using EveryonePHP:</p>

<h3>
<a id="step-1-instantiate-everyonephp-as-an-object" class="anchor" href="#step-1-instantiate-everyonephp-as-an-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Instantiate EveryonePHP as an Object</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// Instantiate EveryonePHP</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">EveryonePHP</span>();</span></pre></div>

<p>Creating a new EveryonePHP object allows us to interact with the class.</p>

<h3>
<a id="step-2-set-everyoneapi-credentials" class="anchor" href="#step-2-set-everyoneapi-credentials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Set EveryoneAPI Credentials</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// Set EveryoneAPI Credentials</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">sid</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>9e3cef42da225d42bd86feaa80ff47<span class="pl-pds">"</span></span>;</span>
<span class="pl-s1"><span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">token</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>65f3ef01462c62f7f4ce7d2156ceee<span class="pl-pds">"</span></span>;</span></pre></div>

<p>EveryonePHP needs these credentials in order to query EveryoneAPI. Otherwise, the query will fail. How you obtain and store these credentials is completely up to you, just be sure to set them for each instance of EveryonePHP before calling <code>query()</code>.</p>

<p>Note 1: During development, you may use phone number +1 (555) 123-4567 to test your code as EveryoneAPI provides this number for testing purposes. The API will answer queries on this number without setting credentials.</p>

<p>Note 2: EveryoneAPI does not currently provide a method for verifying API credentials. For now, the workaround to this is to query the API for the cheapest data point and check for the success of the query.</p>

<h3>
<a id="step-3-set-everyoneapi-data-points" class="anchor" href="#step-3-set-everyoneapi-data-points" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Set EveryoneAPI Data Points</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// Set EveryoneAPI Data Points</span></span>
<span class="pl-s1"><span class="pl-smi">$data</span> <span class="pl-k">=</span> <span class="pl-c1">array</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>profile<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>cnam<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>image<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>location<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>line_provider<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>carrier<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>carrier_o<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>linetype<span class="pl-pds">"</span></span>);</span></pre></div>

<p>Each data point is optional and all data points are returned by default, unless otherwise specified. In the same way EveryoneAPI uses a comma separated list of identifiers, EveryonePHP uses a simple array to specify the data points you wish to retrieve. EveryonePHP passes these identifiers directly to EveryoneAPI so you will use the same identifiers here as you would in a cURL request.</p>

<p>For a full list of available Data Points, check the <a href="https://www.everyoneapi.com/docs#data-points">EveryoneAPI Docs</a>.</p>

<h3>
<a id="step-4-perform-everyoneapi-query" class="anchor" href="#step-4-perform-everyoneapi-query" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4: Perform EveryoneAPI Query</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// Perform EveryoneAPI query</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span><span class="pl-k">-&gt;</span>query(<span class="pl-smi">$phone</span>, <span class="pl-smi">$data</span>);</span></pre></div>

<p>Only <code>$phone</code> is required for this function. The function performs the query against EveryoneAPI and stores the results in a stdClass object, in this example, <code>$api-&gt;results</code>.</p>

<h3>
<a id="step-5-print-the-results" class="anchor" href="#step-5-print-the-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 5: Print the Results</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// Print results</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Print first name</span></span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">results</span><span class="pl-k">-&gt;</span><span class="pl-smi">data</span><span class="pl-k">-&gt;</span><span class="pl-smi">expanded_name</span><span class="pl-k">-&gt;</span><span class="pl-smi">first</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Print last name</span></span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">results</span><span class="pl-k">-&gt;</span><span class="pl-smi">data</span><span class="pl-k">-&gt;</span><span class="pl-smi">expanded_name</span><span class="pl-k">-&gt;</span><span class="pl-smi">last</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// Print carrier name</span></span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">results</span><span class="pl-k">-&gt;</span><span class="pl-smi">data</span><span class="pl-k">-&gt;</span><span class="pl-smi">carrier</span><span class="pl-k">-&gt;</span><span class="pl-smi">name</span>;</span></pre></div>

<p>EveryonePHP converts the JSON response from EveryoneAPI into a stdClass object. This allows us to access the entire response for our application. In the above example, we print the first name, last name, and carrier for the given phone number.</p>

<h3>
<a id="optional-error-checking" class="anchor" href="#optional-error-checking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optional: Error Checking</h3>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// Check for Error</span></span>
<span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">error</span>) {               <span class="pl-c">// If there's an error</span></span>
<span class="pl-s1">   <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Error: <span class="pl-smi">$api</span><span class="pl-k">-&gt;</span><span class="pl-smi">error</span><span class="pl-pds">"</span></span>;    <span class="pl-c">// Print it out</span></span>
<span class="pl-s1">   <span class="pl-k">exit</span>(<span class="pl-c1">1</span>);                      <span class="pl-c">// Exit with status 1</span></span>
<span class="pl-s1">}</span></pre></div>

<p>EveryonePHP will assign error messages, if one occurs, to <code>$api-&gt;error</code>. You can use this in an <code>if</code> statement, as shown above, to halt your application if something has gone wrong. Keep in mind that not all errors are fatal. Therefore, you may get all of the data points you requested back from the server, and an error may have still occurred, so it is wise to always check this property after performing a query.</p>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it!</li>
<li>Create your feature branch: <code>git checkout -b my-new-feature</code>
</li>
<li>Commit your changes: <code>git commit -am 'Add some feature'</code>
</li>
<li>Push to the branch: <code>git push origin my-new-feature</code>
</li>
<li>Submit a pull request ^^,</li>
</ol>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<p>Concept and original codebase: Corey Edwards (<a href="https://www.twitter.com/cedwardsmedia">@cedwardsmedia</a>)</p>

<p>Optimization and Debugging: Brian Seymour (<a href="http://bri.io">@eBrian</a>)</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p><em>EveryonePHP</em> is licensed under the <strong>BSD 3-Clause License</strong>. See <a href="license.html">LICENSE</a> for more.</p>

<hr>

<p><strong>Disclaimer</strong>: <em>EveryonePHP</em> is not endorsed by, sponsored by, or otherwise associated with <a href="http://www.opencnam.com">OpenCNAM</a>, <a href="http://www.everyoneapi.com">EveryoneAPI</a>, or <a href="http://www.telo.com">Telo USA, Inc</a>.</p>

      <footer class="site-footer">
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

    <!-- Piwik -->
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
          var u="//piwik.cedwardsmedia.com/";
          _paq.push(['setTrackerUrl', u+'piwik.php']);
          _paq.push(['setSiteId', 10]);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <noscript><p><img src="//piwik.cedwardsmedia.com/piwik.php?idsite=10" style="border:0;" alt="" /></p></noscript>
    <!-- End Piwik Code -->

  </body>
</html>
